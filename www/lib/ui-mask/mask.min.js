/*!
 * angular-ui-mask
 * https://github.com/angular-ui/ui-mask
 * Version: 1.8.2 - 2016-03-17T13:37:16.675Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!1}).provider("uiMask.Config",function(){var a={};this.maskDefinitions=function(b){return a.maskDefinitions=b},this.clearOnBlur=function(b){return a.clearOnBlur=b},this.clearOnBlurPlaceholder=function(b){return a.clearOnBlurPlaceholder=b},this.eventsToHandle=function(b){return a.eventsToHandle=b},this.addDefaultPlaceholder=function(b){return a.addDefaultPlaceholder=b},this.allowInvalidValue=function(b){return a.allowInvalidValue=b},this.$get=["uiMaskConfig",function(b){var c=b;for(var d in a)angular.isObject(a[d])&&!angular.isArray(a[d])?angular.extend(c[d],a[d]):c[d]=a[d];return c}]}).directive("uiMask",["uiMask.Config",function(a){function b(a){return a===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(a.type||a.href||~a.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var d=angular.copy(a);return function(c,e,f,g){function z(a){return angular.isDefined(a)?(P(a),h?(H(),I(),!0):G()):G()}function A(a){a&&(l=a,!h||0===e.val().length&&angular.isDefined(f.placeholder)||e.val(M(L(e.val()))))}function B(){return z(f.uiMask)}function D(a){return h?(o=L(a||""),q=K(o),g.$setValidity("mask",q),o.length&&(q||F.allowInvalidValue)?M(o):void 0):a}function E(a){return h?(o=L(a||""),q=K(o),g.$viewValue=o.length?M(o):"",g.$setValidity("mask",q),q||F.allowInvalidValue?C?g.$viewValue:o:void 0):a}function G(){return h=!1,J(),angular.isDefined(r)?e.attr("placeholder",r):e.removeAttr("placeholder"),angular.isDefined(s)?e.attr("maxlength",s):e.removeAttr("maxlength"),e.val(g.$modelValue),g.$viewValue=g.$modelValue,!1}function H(){o=u=L(g.$modelValue||""),p=t=M(o),q=K(o),f.maxlength&&e.attr("maxlength",2*j[j.length-1]),!r&&F.addDefaultPlaceholder&&e.attr("placeholder",l);for(var a=g.$modelValue,b=g.$formatters.length;b--;)a=g.$formatters[b](a);g.$viewValue=a||"",g.$render()}function I(){i||(e.bind("blur",R),e.bind("mousedown mouseup",T),e.bind("keydown",V),e.bind(F.eventsToHandle.join(" "),W),i=!0)}function J(){i&&(e.unbind("blur",R),e.unbind("mousedown",T),e.unbind("mouseup",T),e.unbind("keydown",V),e.unbind("input",W),e.unbind("keyup",W),e.unbind("click",W),e.unbind("focus",W),i=!1)}function K(a){return!a.length||a.length>=n}function L(a){var h,i,b="",c=e[0],d=k.slice(),f=v,g=f+$(c),j="";return a=a.toString(),h=0,i=a.length-l.length,angular.forEach(m,function(b){var c=b.position;c>=f&&c<g||(c>=f&&(c+=i),a.substring(c,c+b.value.length)===b.value&&(j+=a.slice(h,c),h=c+b.value.length))}),a=j+a.slice(h),angular.forEach(a.split(""),function(a){d.length&&d[0].test(a)&&(b+=a,d.shift())}),b}function M(a){var b="",c=j.slice();return angular.forEach(l.split(""),function(d,e){a.length&&e===c[0]?(b+=a.charAt(0)||"_",a=a.substr(1),c.shift()):b+=d}),b}function N(a){var c,b=angular.isDefined(f.uiMaskPlaceholder)?f.uiMaskPlaceholder:f.placeholder;return angular.isDefined(b)&&b[a]?b[a]:(c=angular.isDefined(f.uiMaskPlaceholderChar)&&f.uiMaskPlaceholderChar?f.uiMaskPlaceholderChar:"_","space"===c.toLowerCase()?" ":c[0])}function O(){var b,c,a=l.split("");j&&!isNaN(j[0])&&angular.forEach(j,function(b){a[b]="_"}),b=a.join(""),c=b.replace(/[_]+/g,"_").split("_"),c=c.filter(function(a){return""!==a});var d=0;return c.map(function(a){var c=b.indexOf(a,d);return d=c+1,{value:a,position:c}})}function P(a){var b=0;if(j=[],k=[],l="",angular.isString(a)){n=0;var c=!1,d=0,e=a.split(""),f=!1;angular.forEach(e,function(a,e){f?(f=!1,l+=a,b++):F.escChar===a?f=!0:F.maskDefinitions[a]?(j.push(b),l+=N(e-d),k.push(F.maskDefinitions[a]),b++,c||n++,c=!1):"?"===a?(c=!0,d++):(l+=a,b++)})}j.push(j.slice().pop()+1),m=O(),h=j.length>1}function R(){if((F.clearOnBlur||F.clearOnBlurPlaceholder&&0===o.length&&f.placeholder)&&(v=0,w=0,q&&0!==o.length||(p="",e.val(""),c.$apply(function(){g.$pristine||g.$setViewValue("")}))),o!==Q){var a=e.val(),b=""===o&&a&&angular.isDefined(f.uiMaskPlaceholderChar)&&"space"===f.uiMaskPlaceholderChar;b&&e.val(""),S(e[0]),b&&e.val(a)}Q=o}function S(a){var b;if(angular.isFunction(window.Event)&&!a.fireEvent)try{b=new Event("change",{view:window,bubbles:!0,cancelable:!1})}catch(a){b=document.createEvent("HTMLEvents"),b.initEvent("change",!1,!0)}finally{a.dispatchEvent(b)}else"createEvent"in document?(b=document.createEvent("HTMLEvents"),b.initEvent("change",!1,!0),a.dispatchEvent(b)):a.fireEvent&&a.fireEvent("onchange")}function T(a){"mousedown"===a.type?e.bind("mouseout",U):e.unbind("mouseout",U)}function U(){w=$(this),e.unbind("mouseout",U)}function V(a){var b=8===a.which,c=Y(this)-1||0,d=90===a.which&&a.ctrlKey;if(b){for(;c>=0;){if(X(c)){Z(this,c+1);break}c--}x=c===-1}d&&(e.val(""),a.preventDefault())}function W(a){a=a||{};var b=a.which,d=a.type;if(16!==b&&91!==b){var i,f=e.val(),h=t,k=!1,m=L(f),n=u,o=Y(this)||0,p=v||0,q=o-p,r=j[0],s=j[m.length]||j.slice().shift(),y=w||0,z=$(this)>0,A=y>0,B=f.length>h.length||y&&f.length>h.length-y,C=f.length<h.length||y&&f.length===h.length-y,D=b>=37&&b<=40&&a.shiftKey,E=37===b,F=8===b||"keyup"!==d&&C&&q===-1,G=46===b||"keyup"!==d&&C&&0===q&&!A,H=(E||F||"click"===d)&&o>r;if(w=$(this),!D&&(!z||"click"!==d&&"keyup"!==d&&"focus"!==d)){if(F&&x)return e.val(l),c.$apply(function(){g.$setViewValue("")}),void Z(this,p);if("input"===d&&C&&!A&&m===n){for(;F&&o>r&&!X(o);)o--;for(;G&&o<s&&j.indexOf(o)===-1;)o++;var I=j.indexOf(o);m=m.substring(0,I)+m.substring(I+1),m!==n&&(k=!0)}for(i=M(m),t=i,u=m,!k&&f.length>i.length&&(k=!0),e.val(i),k&&c.$apply(function(){g.$setViewValue(i)}),B&&o<=r&&(o=r+1),H&&o--,o=o>s?s:o<r?r:o;!X(o)&&o>r&&o<s;)o+=H?-1:1;(H&&o<s||B&&!X(p))&&o++,v=o,Z(this,o)}}}function X(a){return j.indexOf(a)>-1}function Y(a){if(!a)return 0;if(void 0!==a.selectionStart)return a.selectionStart;if(document.selection&&b(e[0])){a.focus();var c=document.selection.createRange();return c.moveStart("character",a.value?-a.value.length:0),c.text.length}return 0}function Z(a,c){if(!a)return 0;if(0!==a.offsetWidth&&0!==a.offsetHeight)if(a.setSelectionRange)b(e[0])&&(a.focus(),a.setSelectionRange(c,c));else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",c),d.select()}}function $(a){return a?void 0!==a.selectionStart?a.selectionEnd-a.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var j,k,l,m,n,o,p,q,t,u,v,w,x,h=!1,i=!1,r=f.placeholder,s=f.maxlength,y=g.$isEmpty;g.$isEmpty=function(a){return y(h?L(a||""):a)};var C=!1;f.$observe("modelViewValue",function(a){"true"===a&&(C=!0)}),f.$observe("allowInvalidValue",function(a){F.allowInvalidValue=""===a||!!a,D(g.$modelValue)});var F={};f.uiOptions?(F=c.$eval("["+f.uiOptions+"]"),F=angular.isObject(F[0])?function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(void 0===b[c]?b[c]=angular.copy(a[c]):angular.isObject(b[c])&&!angular.isArray(b[c])&&(b[c]=angular.extend({},a[c],b[c])));return b}(d,F[0]):d):F=d,f.$observe("uiMask",z),angular.isDefined(f.uiMaskPlaceholder)?f.$observe("uiMaskPlaceholder",A):f.$observe("placeholder",A),angular.isDefined(f.uiMaskPlaceholderChar)&&f.$observe("uiMaskPlaceholderChar",B),g.$formatters.unshift(D),g.$parsers.unshift(E);var Q=e.val();e.bind("mousedown mouseup",T),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1})}}}}])}();
